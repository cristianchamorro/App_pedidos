# Flujo de la Pantalla del Domiciliario

## Diagrama de Flujo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      INICIO DE LA APP                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   RoleSelectionScreen                            â”‚
â”‚  [Ingresar como Usuario]  [Ingresar como Administrador]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ clic en Administrador
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LoginAdminPage                              â”‚
â”‚  Usuario: [_________]                                           â”‚
â”‚  Password: [_________]                                          â”‚
â”‚                    [Ingresar]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ AutenticaciÃ³n exitosa
                           â”‚ con rol="domiciliario"
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               PedidosDomiciliarioPage                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  "Pedidos listos para entregar"                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Pedido #123                [Marcar como Entregado]    â”‚   â”‚
â”‚  â”‚  Cliente: Juan PÃ©rez                                    â”‚   â”‚
â”‚  â”‚  TelÃ©fono: 3001234567                                  â”‚   â”‚
â”‚  â”‚  DirecciÃ³n: Calle 123 #45-67  â† DESTACADA             â”‚   â”‚
â”‚  â”‚  Total: $25,000                                         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Productos:                                             â”‚   â”‚
â”‚  â”‚  2x Pizza                                               â”‚   â”‚
â”‚  â”‚  1x Gaseosa                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Pedido #124                [Marcar como Entregado]    â”‚   â”‚
â”‚  â”‚  ...                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  ðŸ”„ Auto-refresh cada 5 segundos                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ Al presionar "Marcar como Entregado"
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Call: PUT /pedidos/:id/entregado-cliente                   â”‚
â”‚  Body: { "changed_by": "domiciliario" }                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ Respuesta exitosa
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… SnackBar: "Pedido marcado como entregado"                  â”‚
â”‚  ðŸ”„ Lista se refresca automÃ¡ticamente                           â”‚
â”‚  ðŸ“¦ El pedido desaparece de la lista (ya no estÃ¡ "listo")      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Estados del Pedido

```
CLIENTE              CAJERO              COCINERO            DOMICILIARIO
   â”‚                   â”‚                    â”‚                     â”‚
   â–¼                   â”‚                    â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                    â”‚                     â”‚
â”‚pendiente â”‚          â”‚                    â”‚                     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚                    â”‚                     â”‚
     â”‚                â–¼                    â”‚                     â”‚
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                     â”‚
     â”‚         â”‚  pagado  â”‚               â”‚                     â”‚
     â”‚         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜               â”‚                     â”‚
     â”‚              â”‚                     â–¼                     â”‚
     â”‚              â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
     â”‚              â”‚              â”‚  listo   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ VE AQUÃ
     â”‚              â”‚              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â”‚
     â”‚              â”‚                   â”‚                      â–¼
     â”‚              â”‚                   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚              â”‚                   â”‚              â”‚ Marca como   â”‚
     â”‚              â”‚                   â”‚              â”‚ ENTREGADO    â”‚
     â”‚              â”‚                   â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚                   â”‚                     â–¼
     â”‚              â”‚                   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚              â”‚                   â”‚              â”‚entregado â”‚
     â”‚              â”‚                   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚                   â”‚                     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ComparaciÃ³n con Otros Roles

| Aspecto            | Cajero              | Cocinero           | Domiciliario       |
|--------------------|---------------------|--------------------|--------------------|
| **Estado visible** | pendiente           | pagado             | listo              |
| **AcciÃ³n**         | Realizar pago       | Marcar preparado   | Marcar entregado   |
| **Estado final**   | pagado              | listo              | entregado          |
| **Info destacada** | Total a cobrar      | Productos grandes  | DirecciÃ³n de entrega|
| **Auto-refresh**   | âŒ No               | âœ… 5 segundos      | âœ… 5 segundos      |
| **Endpoint usado** | /pago               | /listo-cocina      | /entregado-cliente |

## Diferencias Clave de la Pantalla del Domiciliario

1. **DirecciÃ³n destacada en naranja**: Para que sea fÃ¡cilmente visible
2. **Total en verde y grande**: Para confirmar el monto antes de entregar
3. **Lista de productos**: Para verificar quÃ© va en la entrega
4. **Auto-refresh**: Para ver nuevos pedidos sin intervenciÃ³n manual

## Ejemplo de Datos Mostrados

```dart
{
  "order_id": 123,
  "cliente_nombre": "Juan PÃ©rez",
  "cliente_telefono": "3001234567",
  "direccion_entrega": "Calle 123 #45-67, Apartamento 501",  // â† DESTACADO
  "total": "25000",
  "productos": [
    {
      "nombre": "Pizza Hawaiana",
      "cantidad": 2,
      "price": "12500"
    },
    {
      "nombre": "Gaseosa 1.5L",
      "cantidad": 1,
      "price": "5000"
    }
  ]
}
```

## InteracciÃ³n del Usuario

```
1. ABRIR APP
   â””â”€> Seleccionar "Ingresar como Administrador"
       â””â”€> Ingresar credenciales (rol: domiciliario)
           â””â”€> Sistema redirige a /domiciliario

2. VER PEDIDOS
   â””â”€> Lista se carga automÃ¡ticamente (estado: listo)
       â””â”€> Cada 5 segundos se actualiza
           â””â”€> Nuevos pedidos aparecen automÃ¡ticamente

3. ENTREGAR PEDIDO
   â””â”€> Ver direcciÃ³n de entrega (destacada)
       â””â”€> Verificar productos
           â””â”€> Confirmar total
               â””â”€> Presionar "Marcar como Entregado"
                   â””â”€> Ver confirmaciÃ³n
                       â””â”€> Pedido desaparece de la lista

4. CONTINUAR
   â””â”€> Esperar nuevos pedidos (auto-refresh)
       â””â”€> Repetir proceso para siguiente pedido
```

## Ventajas del Auto-refresh

- âœ… No necesita refrescar manualmente
- âœ… Ve pedidos nuevos inmediatamente
- âœ… Puede planificar rutas con anticipaciÃ³n
- âœ… Reduce tiempo de espera
- âœ… Mejora eficiencia operativa
